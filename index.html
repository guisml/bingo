<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 100vh;
          margin: 0;
          font-family: Arial, sans-serif;
        }
    
        h1 {
          margin-bottom: 20px;
        }
    
        .bingo-card-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          align-items: flex-start; /* Alinhar cartelas no topo */
          gap: 20px;
        }
    
        .bingo-card {
          width: 200px;
          height: 200px;
          display: grid;
          grid-template-columns: repeat(5, 1fr);
          grid-template-rows: repeat(5, 1fr);
          gap: 5px;
          justify-items: center;
          align-items: center;
        }
    
        .bingo-number {
          width: 100%;
          height: 100%;
          border: 1px solid black;
          display: flex;
          justify-content: center;
          align-items: center;
          font-size: 20px;
          font-weight: bold;
        }
        
        .green {
          background-color: green;
        }
        
        #winner-message {
          margin-top: 20px;
          font-weight: bold;
        }
        
        .player-card {
          display: flex;
          flex-direction: column;
          align-items: center;
        }
      </style>
    </head>
    <body>
      <h1>Bingo</h1>
      <label for="player-name">Nome do jogador:</label>
      <input type="text" id="player-name" placeholder="Digite o nome do jogador">
      <button id="add-player-button">Adicionar jogador</button>
      <button id="generate-cards-button">Gerar cartelas</button>
      <button id="reset-button">Reiniciar jogo</button>
      <button id="start-game-button">Começar jogo</button>
      <div class="bingo-card-container" id="bingo-cards-container"></div>
      <div id="winner-message"></div>
    
      <script>
        var players = [];
        var bingoNumbers = [];
        var currentNumberIndex = 0;
        var gameStarted = false;
        var gameOver = false;
    
        function addPlayer() {
          var playerNameInput = document.getElementById("player-name");
          var playerName = playerNameInput.value;
    
          if (playerName.trim() === "") {
            alert("Por favor, insira o nome do jogador.");
            return;
          }
    
          players.push({
            name: playerName,
            card: null,
            hasBingo: false
          });
    
          playerNameInput.value = "";
        }
        
        function generateUniqueRandomNumbers(min, max, count) {
          var numbers = [];
          while (numbers.length < count) {
            var number = Math.floor(Math.random() * (max - min + 1)) + min;
            if (!numbers.includes(number)) {
              numbers.push(number);
            }
          }
          return numbers;
        }
    
        function generateBingoCard() {
          var bingoCardsContainer = document.getElementById("bingo-cards-container");
          bingoCardsContainer.innerHTML = "";
    
          for (var i = 0; i < players.length; i++) {
            var player = players[i];
    
            var bingoCardContainer = document.createElement("div");
            bingoCardContainer.classList.add("player-card"); /* Adiciona classe para criar um container para cada jogador */
    
            var bingoCard = document.createElement("div");
            bingoCard.classList.add("bingo-card");
    
            var numbers = generateUniqueRandomNumbers(1, 70, 25);
    
            for (var j = 0; j < 25; j++) {
              var bingoNumber = document.createElement("div");
              bingoNumber.classList.add("bingo-number");
              bingoNumber.innerText = numbers[j];
              bingoCard.appendChild(bingoNumber);
            }
    
            player.card = bingoCard;
    
            var playerName = document.createElement("h3");
            playerName.innerText = player.name;
    
            bingoCardContainer.appendChild(playerName); /* Adiciona o nome do jogador antes da cartela */
            bingoCardContainer.appendChild(bingoCard);
            bingoCardsContainer.appendChild(bingoCardContainer);
          }
        }
    
        function resetGame() {
          players = [];
          bingoNumbers = [];
          currentNumberIndex = 0;
          gameStarted = false;
          gameOver = false;
          var bingoCardsContainer = document.getElementById("bingo-cards-container");
          bingoCardsContainer.innerHTML = "";
          var winnerMessage = document.getElementById("winner-message");
          winnerMessage.innerText = "";
        }
        
        function startGame() {
          if (players.length === 0) {
            alert("Adicione jogadores e gere as cartelas antes de começar o jogo.");
            return;
          }
          
          gameStarted = true;
          
          var startGameButton = document.getElementById("start-game-button");
          startGameButton.disabled = true;
          
          var generateCardsButton = document.getElementById("generate-cards-button");
          generateCardsButton.disabled = true;
          
          bingoNumbers = generateUniqueRandomNumbers(1, 70, 70);
          
          nextNumber();
        }
        
        function nextNumber() {
          if (currentNumberIndex < bingoNumbers.length) {
            var number = bingoNumbers[currentNumberIndex];
            currentNumberIndex++;
            
            markNumber(number);
            
            if (!gameOver) {
              setTimeout(nextNumber, 1000); // Delay de 1 segundo antes de sortear o próximo número
            }
          } else {
            gameOver = true;
            checkWinner();
          }
        }
        
        function markNumber(number) {
          var bingoCards = document.querySelectorAll(".bingo-card");
          
          bingoCards.forEach(function(bingoCard) {
            var bingoNumbers = bingoCard.querySelectorAll(".bingo-number");
            
            bingoNumbers.forEach(function(bingoNumber) {
              if (bingoNumber.innerText == number) {
                bingoNumber.classList.add("green");
              }
            });
          });
        }
        
        function checkWinner() {
          for (var i = 0; i < players.length; i++) {
            var player = players[i];
            var bingoNumbers = player.card.querySelectorAll(".bingo-number");
            var isWinner = true;
            
            for (var j = 0; j < bingoNumbers.length; j++) {
              if (!bingoNumbers[j].classList.contains("green")) {
                isWinner = false;
                break;
              }
            }
            
            if (isWinner) {
              player.hasBingo = true;
              var winnerMessage = document.getElementById("winner-message");
              winnerMessage.innerText = "O jogador " + player.name + " venceu!";
              break;
            }
          }
        }
    
        var addPlayerButton = document.getElementById("add-player-button");
        addPlayerButton.addEventListener("click", addPlayer);
    
        var generateCardsButton = document.getElementById("generate-cards-button");
        generateCardsButton.addEventListener("click", generateBingoCard);
    
        var resetButton = document.getElementById("reset-button");
        resetButton.addEventListener("click", resetGame);
        
        var startGameButton = document.getElementById("start-game-button");
        startGameButton.addEventListener("click", startGame);
      </script>
    
</body>
</html>
